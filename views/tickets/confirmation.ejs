<% layout('partials/boilerplate') -%>

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow">
        <div class="card-header bg-success text-white text-center">
          <h2>üéüÔ∏è Booking Confirmation</h2>
        </div>
        <div class="card-body">
          <div class="text-center mb-4">
            <h4 class="card-title"><%= ticket.eventName %></h4>
            <p class="text-muted">
              Booking ID: <strong><%= ticket.bookingId %></strong>
            </p>
          </div>
          
          <div class="row">
            <div class="col-md-6">
              <h5>Event Details</h5>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <strong>Date:</strong> 
                  <%= ticket.eventDate.toLocaleDateString('en-IN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) %>
                </li>
                <li class="list-group-item">
                  <strong>Location:</strong> <%= ticket.location %>
                </li>
                <li class="list-group-item">
                  <strong>Category:</strong> 
                  <span class="badge bg-info"><%= ticket.eventCategory %></span>
                </li>
                <li class="list-group-item">
                  <strong>Price:</strong> 
                  <span class="text-success fw-bold">‚Çπ<%= ticket.pricePerTicket.toLocaleString('en-IN') %></span>
                </li>
              </ul>
            </div>
            
            <div class="col-md-6">
              <h5>Booking Information</h5>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <strong>Booked By:</strong> <%= ticket.bookedBy.username %>
                </li>
                <li class="list-group-item">
                  <strong>Booking Date:</strong> 
                  <%= ticket.bookingDate.toLocaleDateString('en-IN', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' }) %>
                </li>
                <li class="list-group-item">
                  <strong>Status:</strong> 
                  <span class="badge bg-success">Confirmed</span>
                </li>
                <li class="list-group-item">
                  <strong>QR Code:</strong> 
                  <div class="border p-2 text-center">
                    <%= ticket.qrCode %>
                    <div class="mt-1 small text-muted">Scan at venue entrance</div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          
          <div class="mt-4 text-center">
            <p class="alert alert-info">
              ‚úÖ Confirmation sent to <%= currentUser.email %> üìß
            </p>
            
            <div class="btn-group" role="group">
              <a href="/tickets/<%= ticket._id %>/download" class="btn btn-primary">
                üìé Download PDF Ticket
              </a>
              <a href="/tickets/<%= ticket._id %>/cancel" class="btn btn-danger" 
                 onclick="return confirm('Are you sure you want to cancel this ticket? A refund will be initiated.')">
                ‚ùå Cancel Ticket
              </a>
              <a href="/tickets" class="btn btn-secondary">‚Üê Back to Tickets</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>